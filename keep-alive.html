<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="assets/style.css?t=90051322">
    <link rel="stylesheet" href="styles.css?t=6eea839d">
    <script src="assets/script.js?t=93f1a66c"></script>
    <script src="scripts.js?t=bafb4b9e"></script>
    <script src="sharetribe-flex-sdk-web.js?t=1318dcb3"></script>
    <title>Keep-Alive - Sharetribe Flex SDK for JavaScript</title>
    <meta name="viewport" content="width=device-width">
  </head>
  <body class="-menu-visible">
    <div class="doc-layout">
      <div class="toggle menu-toggle js-menu-toggle"></div>
      <div class="menu toc-menu">
        <ul>
          <li class="menu-item -level-0 -parent">
            <ul class="submenu">
              <li class="menu-item -level-1"><a class="link title  link-index" href="index.html">Sharetribe Flex SDK for JavaScript</a>
              </li>
              <li class="menu-item -level-1"><a class="link title  link-features" href="features.html">Features</a>
              </li>
              <li class="menu-item -level-1"><a class="link title  link-try-it-in-browser" href="try-it-in-browser.html">Try it in browser!</a>
              </li>
              <li class="menu-item -level-1"><a class="link title  link-try-it-in-the-playground" href="try-it-in-the-playground.html">Try it in the API Playground!</a>
              </li>
              <li class="menu-item -level-1 -parent"><span class="title">Getting started</span>
                <ul class="submenu">
                  <li class="menu-item -level-2"><a class="link title  link-authentication" href="authentication.html">Authentication</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title  link-calling-the-api" href="calling-the-api.html">Calling the Marketplace API</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title  link-calling-the-asset-delivery-api" href="calling-the-asset-delivery-api.html">Calling the Asset Delivery API</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title  link-types" href="types.html">Types</a>
                  </li>
                </ul>
              </li>
              <li class="menu-item -level-1 -parent"><span class="title">Advanced</span>
                <ul class="submenu">
                  <li class="menu-item -level-2"><a class="link title  link-configurations" href="configurations.html">Configurations</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title  link-your-own-types" href="your-own-types.html">Your own types</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title  link-serializing-types-to-json" href="serializing-types-to-json.html">Serializing types to JSON</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title  link-object-query-parameters" href="object-query-parameters.html">Object query parameters</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title  link-token-store" href="token-store.html">Token store</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title  link-sharing-session-between-client-and-server" href="sharing-session-between-client-and-server.html">Sharing session between client and server</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title -active link-keep-alive" href="keep-alive.html">Keep-Alive</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title  link-writing-your-own-token-store" href="writing-your-own-token-store.html">Writing your own token store</a>
                  </li>
                </ul>
              </li>
              <li class="menu-item -level-1"><a class="link title  link-developing-sdk" href="developing-sdk.html">Developing SDK</a>
              </li>
            </ul>
          </li>
        </ul>
      </div>
      <div class="body page-keep-alive">
        <div class="header-nav">
          <div class="right"><a class="iconlink" href="https://github.com/sharetribe/flex-sdk-js" data-title="sharetribe/flex-sdk-js">
              <!-- span.title Open in GitHub--><span class="icon -github"></span></a>
          </div>
        </div>
        <div class="markdown-body"><h1 id="keep-alive">Keep-Alive</h1>
<p><em>Node.js only</em></p>
<p>By default, Node.js <code>http.Agent</code> and <code>https.Agent</code> create a new
connection for each request. After the request is completed, the
connection is closed. By keeping the connection open and reusing it
for subsequent requests, the request time can be reduced. This is
escpecially true for HTTPS connections, where the SSL handshake adds
extra overhead for each request.</p>
<p>The SDK can be configured to use custom <code>httpAgent</code> and <code>httpsAgent</code>,
where the <code>keepAlive</code> can be set to <code>true</code>.</p>
<p>Using persistent Keep-Alive connections is <strong>recommended</strong>.</p>
<p><strong>Example:</strong></p>
<pre><code class="lang-js"><span class="pl-k">const</span> express = <span class="pl-c1">require</span>(<span class="pl-s">&apos;express&apos;</span>);
<span class="pl-k">const</span> http = <span class="pl-c1">require</span>(<span class="pl-s">&apos;http&apos;</span>);
<span class="pl-k">const</span> https = <span class="pl-c1">require</span>(<span class="pl-s">&apos;https&apos;</span>);
<span class="pl-k">const</span> sharetribeSdk = <span class="pl-c1">require</span>(<span class="pl-s">&apos;sharetribe-flex-sdk&apos;</span>);

<span class="pl-k">const</span> app = express();

<span class="pl-c">// Instantiate HTTP(S) Agents with keepAlive set to true.</span>
<span class="pl-c">// This will reduce the request time for consecutive requests by</span>
<span class="pl-c">// reusing the existing TCP connection, thus eliminating the time used</span>
<span class="pl-c">// for setting up new TCP connections.</span>
<span class="pl-k">const</span> httpAgent = <span class="pl-k">new</span> http.Agent({ <span class="hljs-attr">keepAlive</span>: <span class="pl-c1">true</span> });
<span class="pl-k">const</span> httpsAgent = <span class="pl-k">new</span> https.Agent({ <span class="hljs-attr">keepAlive</span>: <span class="pl-c1">true</span> });

app.get(<span class="pl-s">&apos;/&apos;</span>, (req, res) =&gt; {
  <span class="pl-c">// Initialize the SDK instance</span>
  <span class="pl-k">const</span> sdk = sharetribeSdk.createInstance({
    <span class="hljs-attr">clientId</span>: <span class="pl-s">&quot;&lt;your Client ID&gt;&quot;</span>,
    <span class="hljs-attr">baseUrl</span>: <span class="pl-s">&quot;&lt;your Base URL&gt;&quot;</span>,
    <span class="hljs-attr">httpAgent</span>: httpAgent,
    <span class="hljs-attr">httpsAgent</span>: httpsAgent
  });

  <span class="pl-c">// Call the SDK to preload listings</span>
  sdk.listings.search({ ... }).then(<span class="hljs-function">(<span class="hljs-params">listingsResult</span>) =&gt;</span> {
    <span class="pl-c">// do rendering etc.</span>
  });
});
</code></pre>

        </div>
        <div class="footer-nav">
          <div class="left"><a href="sharing-session-between-client-and-server.html"><span class="title">Sharing session between client and server</span></a></div>
          <div class="right"><a href="writing-your-own-token-store.html"><span class="label">Next: </span><span class="title">Writing your own token store</span></a></div>
        </div>
      </div>
    </div>
  </body>
</html>